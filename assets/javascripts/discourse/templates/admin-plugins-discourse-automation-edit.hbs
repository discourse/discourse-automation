<section class="discourse-automation-form edit">
  <form class="form-horizontal">
    {{form-error error=error}}

    <section class="form-section edit">
      <div class="control-group">
        <label class="control-label">
          {{i18n "discourse_automation.models.automation.name.label"}}
        </label>

        <div class="controls">
          {{text-field
            value=automation.name
            type="text"
            classNames="input-large"
            autofocus="autofocus"
          }}
        </div>
      </div>

      <div class="control-group">
        <label class="control-label">
          {{i18n "discourse_automation.models.script.name.label"}}
        </label>

        <div class="controls">
          {{automation.script.name}}

          <p class="control-description">
            {{automation.script.doc}}
          </p>
        </div>
      </div>
    </section>

    <section class="trigger-section form-section edit">
      <h2 class="title">
        {{i18n "discourse_automation.edit_automation.trigger_section.title"}}
      </h2>

      <div class="control-group">
        <label class="control-label">
          {{i18n "discourse_automation.models.trigger.name.label"}}
        </label>

        <div class="controls">
          {{combo-box
            value=automationForm.trigger
            content=model.triggerables
            class="scripts-list"
            onChange=(action "onChangeTrigger")
          }}
        </div>
      </div>

      {{#if automationForm.trigger}}
        {{#each triggerFields as |field|}}
          {{automation-field
            automation=automation
            field=field
            onChangeField=(action "onChangeField")
          }}
        {{/each}}
      {{/if}}
    </section>

    <section class="fields-section form-section edit">
      <h2 class="title">
        {{i18n "discourse_automation.edit_automation.fields_section.title"}}
      </h2>

      <div class="control-group">
        {{#each scriptFields as |field|}}
          {{automation-field
            automation=automation
            field=field
            onChangeField=(action "onChangeField")
          }}
        {{/each}}
      </div>
    </section>

    <div class="control-group">
      {{d-button
        icon="plus"
        isLoading=isUpdatingAutomation
        class="btn-primary"
        label="discourse_automation.update"
        type="submit"
        action=(action "saveAutomation" automation)
      }}
    </div>
  </form>
</section>
